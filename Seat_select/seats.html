<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Booking cinema seats</title>
    <link rel="stylesheet" href="seats.css" />
  </head>
  <body>
    <div class="movie-container">
      <label>Pick a movie:</label>
      <select id="movie">
        <option value="10">Oppenhimer ($10)</option>
        <option value="12">Jawan ($12)</option>
        <option value="8">Barbie ($8)</option>
        <option value="9">Pathaan ($9)</option>
      </select>
    </div>

    <ul class="showcase">
      <li>
        <div class="seat"></div>
        <small>Available</small>
      </li>
      <li>
        <div class="seat selected"></div>
        <small>Selected</small>
      </li>
      <li>
        <div class="seat occupied"></div>
        <small>Occupied</small>
      </li>
    </ul>

    <div class="container">
      <div class="screen"></div>
      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
      </div>

      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat occupied"></div>
        <div class="seat occupied"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
      </div>

      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat occupied"></div>
        <div class="seat occupied"></div>
      </div>

      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
      </div>

      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat occupied"></div>
        <div class="seat occupied"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
      </div>

      <div class="row">
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat"></div>
        <div class="seat occupied"></div>
        <div class="seat occupied"></div>
        <div class="seat occupied"></div>
        <div class="seat"></div>
      </div>
    </div>

    <p class="text">
      You have selected <span id="count">0</span> seats for a price of $<span
        id="total"
        >0</span
      >
    </p>
    <a href="/Confirm_payment/index.html" id="paymentButton"
      ><button class="submit-button">Confirm Payment</button></a
    >

    <script src="./seats.js"></script>

    <!-- <script>
      const container = document.querySelector(".container");
      const seats = document.querySelectorAll(".row .seat:not(.occupied)");
      const count = document.getElementById("count");
      const total = document.getElementById("total");
      const movieSelect = document.getElementById("movie");

      populateUI();

      let ticketPrice = +movieSelect.value;

      // Save selected movie index & price
      function setMovieData(movieIndex, moviePrice) {
        // Clear selected seats when a new movie is selected
        clearSelectedSeats();

        localStorage.setItem("selectedMovieIndex", movieIndex);
        localStorage.setItem("selectedMoviePrice", moviePrice);
      }

      // Clear selected seats
      function clearSelectedSeats() {
        const selectedSeats = document.querySelectorAll(".row .seat.selected");
        selectedSeats.forEach((seat) => {
          seat.classList.remove("selected");
        });

        localStorage.removeItem("selectedSeats");
      }

      // Update total and count
      function updateSelectedCount() {
        const selectedSeats = document.querySelectorAll(".row .seat.selected");

        const seatsIndex = [...selectedSeats].map((seat) =>
          [...seats].indexOf(seat)
        );

        localStorage.setItem("selectedSeats", JSON.stringify(seatsIndex));

        const selectedSeatsCount = selectedSeats.length;

        count.innerText = selectedSeatsCount;
        total.innerText = `Rs.${selectedSeatsCount * ticketPrice}`;
      }

      // Get data from local storage and populate UI
      function populateUI() {
        const selectedSeats = JSON.parse(localStorage.getItem("selectedSeats"));

        if (selectedSeats !== null && selectedSeats.length > 0) {
          seats.forEach((seat, index) => {
            if (selectedSeats.indexOf(index) > -1) {
              seat.classList.add("selected");
            }
          });
        }

        const selectedMovieIndex = localStorage.getItem("selectedMovieIndex");

        if (selectedMovieIndex !== null) {
          movieSelect.selectedIndex = selectedMovieIndex;
        }
      }

      // Movie select event
      movieSelect.addEventListener("change", (e) => {
        ticketPrice = +e.target.value;
        setMovieData(e.target.selectedIndex, e.target.value);
        updateSelectedCount();
      });

      // Seat click event
      container.addEventListener("click", (e) => {
        if (
          e.target.classList.contains("seat") &&
          !e.target.classList.contains("occupied")
        ) {
          e.target.classList.toggle("selected");

          updateSelectedCount();
        }
      });

      // Continue to payment button click event
      const paymentButton = document.getElementById("paymentButton");
      paymentButton.addEventListener("click", () => {
        const totalPrice = +total.innerText.replace(/\D/g, "");
        const seatPrices = Array.from(seats).map((seat, index) => {
          const seatPrice = seat.classList.contains("selected")
            ? ticketPrice
            : 0;
          return seatPrice;
        });

        window.location.href = `tickets_payment.html?total=${totalPrice}&seatPrices=${JSON.stringify(
          seatPrices
        )}`;
      });

      // Initial count and total
      updateSelectedCount();
    </script> -->

    <!-- ... (remaining HTML code) ... -->

    <!-- ... (remaining HTML code) ... -->
  </body>
</html>
